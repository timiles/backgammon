<!DOCTYPE html5>
<html xmlns="http://www.w3.org/1999/xhtml">
<meta name="viewport"
    content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />

<head>
    <title>Backgammon</title>
    <link rel="stylesheet" type="text/css" href="css/ui.css" />
    <script>var exports = {};</script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>
    <script src="js/url-search-params.js"></script>
    <script src="js/require.js"></script>
    <script src="srx/Backgammon.js"></script>
    <style>
        BODY {
            font-family: Arial;
        }
    </style>
</head>

<body>
    <!-- <h1> Backgammon</h1> -->

    <div id="backgammon"></div>
    <script>var exports = {};</script>
    <script>

        const sendData = async (message) => {
            window.ReactNativeWebView.postMessage(JSON.stringify(message));
            console.warn(JSON.stringify(message));
        };
        window.addEventListener("message", message => {
            alert(message.data)

        });

        var queryStringParams = new URLSearchParams(window.location.search);
        var blackIsComputer = queryStringParams.get('black') === 'computer';
        var whiteIsComputer = queryStringParams.get('white') === 'computer';
        var again = queryStringParams.get('again');
        //GAME.board.onPointSelected(7);

        // var myId = PlayerId.WHITE;
        // var remote = { is: true, nonce:128, id: PlayerId.WHITE };

        var init = "var BOARD = new Board();"+
        "var DICE = new Dice(new DiceRollGenerator(), remote);"+
        "var statusLogger = new StatusLogger();"+
        "var GAME = new Game(BOARD, DICE, statusLogger, [blackIsComputer, whiteIsComputer], remote, sendData);"+
        "var Backgammon = new Backgammon('backgammon', GAME);"+
        "if (remote.id == PlayerId.BLACK) {$('.board').addClass('rotate');}"

        if (again){
            eval(again+init)
        }
    </script>

    <!-- <p><a href="../tests/SpecRunner.html">run tests</a></p> -->
</body>

</html>